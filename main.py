import asyncio
import logging
import random
from aiogram import Bot, Dispatcher, types
from aiogram.filters import Command

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s'
)

# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ (–ó–ê–ú–ï–ù–ò–¢–ï –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω!)
BOT_TOKEN = "7764092455:AAHYt5DeyvQofKGfDrQ7tBuO9iO6-JyEWrM"

# –ë–∞–∑–∞ –∑–∞–¥–∞–Ω–∏–π
TASKS = {
    1: [
        "üéØ –°–ª–µ–¥—É—é—â–∏–µ 2 —Ö–æ–¥–∞ –¥–∞–≤–∞–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥—Ä—É–≥–æ–º—É –∏–≥—Ä–æ–∫—É, –∫–∞–∫ –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä: ¬´–ö–∞–∂–µ—Ç—Å—è, –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤—ã—Ç–∞—â–∏—Ç—å –∫—Ä–∞—Å–Ω—ã–π –±—Ä—É—Å–æ–∫¬ª).",
        "üéØ –°–ª–µ–¥—É—é—â–∏–µ 2 —Ö–æ–¥–∞ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–π –∏–≥—Ä–æ–∫–∞–º, –∫–∞–∫–∏–µ –±–ª–æ–∫–∏ –ª—É—á—à–µ –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å, –∫–∞–∫ –≥–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫.",
        "üéØ –í —Ç–µ—á–µ–Ω–∏–µ 2 —Ö–æ–¥–æ–≤ –∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –¥–µ–π—Å—Ç–≤–∏—è –∏–≥—Ä–æ–∫–æ–≤ –≤ —Å—Ç–∏–ª–µ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ç–æ—Ä–∞."
    ],
    2: [
        "ü•§ –ù–∞–ø–æ–ª–Ω–∏ 3 —Å—Ç–æ–ø–∫–∏: 2 —Å –≤–æ–¥–æ–π, 1 —Å –∞–ª–∫–æ–≥–æ–ª–µ–º. –ò–≥—Ä–æ–∫ —Å–ª–µ–≤–∞ –Ω–∞—É–≥–∞–¥ –≤—ã–±–∏—Ä–∞–µ—Ç –∏ –≤—ã–ø–∏–≤–∞–µ—Ç –æ–¥–Ω—É.",
        "ü•§ –°–æ–∑–¥–∞–π 3 –Ω–∞–ø–∏—Ç–∫–∞: 2 –±–µ–∑–∞–ª–∫–æ–≥–æ–ª—å–Ω—ã—Ö, 1 –∞–ª–∫–æ–≥–æ–ª—å–Ω—ã–π. –ò–≥—Ä–æ–∫ —Å–ø—Ä–∞–≤–∞ –≤—Å–ª–µ–ø—É—é –≤—ã–±–∏—Ä–∞–µ—Ç –æ–¥–∏–Ω –∏ –≤—ã–ø–∏–≤–∞–µ—Ç.",
        "ü•§ –ü—Ä–∏–≥–æ—Ç–æ–≤—å 3 –∫–æ–∫—Ç–µ–π–ª—è (2 –ø—Ä–æ—Å—Ç—ã—Ö, 1 –ø–æ–∫—Ä–µ–ø—á–µ). –°–ª—É—á–∞–π–Ω—ã–π –∏–≥—Ä–æ–∫ –ø—Ä–æ–±—É–µ—Ç –æ–¥–∏–Ω –Ω–∞—É–≥–∞–¥."
    ],
    3: [
        "üó∫Ô∏è –ü–µ—Ä–µ–∏–º–µ–Ω—É–π –ª—é–±–æ–π –±—Ä—É—Å–æ–∫ –≤ —á–µ—Å—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–ú—ã—Å –ü–∞–≤—à–∏—Ö –ù–∞–ø–æ–ª–µ–æ–Ω–æ–≤¬ª) –∏ –æ–±—ä—è–≤–∏ —ç—Ç–æ –µ–≥–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º",
        "üó∫Ô∏è –î–∞–π –±—Ä—É—Å–∫—É –Ω–æ–≤–æ–µ –∏–º—è –≤ —Å—Ç–∏–ª–µ —Ñ—ç–Ω—Ç–µ–∑–∏-–≥–µ–æ–≥—Ä–∞—Ñ–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–û–∑–µ—Ä–æ –í–µ—á–Ω–æ–π –¢—å–º—ã¬ª). –í—Å–µ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ.",
        "üó∫Ô∏è –ü—Ä–∏–¥—É–º–∞–π –±—Ä—É—Å–∫—É –∏–º—è –∏–∑ –º–∏—Ä–∞ –Ω–∞—É—á–Ω–æ–π —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–ì–∞–ª–∞–∫—Ç–∏–∫–∞ –ü–ª–∞–º–µ–Ω–∏¬ª). –¢–µ–ø–µ—Ä—å —ç—Ç–æ –µ–≥–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –∏–º—è."
    ],
    4: [
        "üîÑ –ü–æ–º–µ–Ω—è–π—Å—è –∏–º–µ–Ω–∞–º–∏ —Å –ª—é–±—ã–º –∏–≥—Ä–æ–∫–æ–º. –í—Å–µ –¥–æ–ª–∂–Ω—ã –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –≤–∞–º –ø–æ –Ω–æ–≤—ã–º –∏–º–µ–Ω–∞–º –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–∞–¥–µ–Ω–∏—è –±–∞—à–Ω–∏.",
        "üîÑ –û–±–º–µ–Ω—è–π—Å—è –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å—é —Å –∏–≥—Ä–æ–∫–æ–º –Ω–∞–ø—Ä–æ—Ç–∏–≤. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –∏–º–µ–Ω–∞ –¥–æ –∫–æ–Ω—Ü–∞ —Ä–∞—É–Ω–¥–∞.",
        "üîÑ –°—Ç–∞–Ω—å –Ω–∞ –≤—Ä–µ–º—è –¥—Ä—É–≥–∏–º –∏–≥—Ä–æ–∫–æ–º. –í—ã–±–µ—Ä–∏, —Å –∫–µ–º –ø–æ–º–µ–Ω—è—Ç—å—Å—è –∏–º–µ–Ω–∞–º–∏ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –æ–±—Ä—É—à–µ–Ω–∏—è."
    ],
    5: [
        "üê± –ë—ã—Å—Ç—Ä–æ –Ω–∞–π–¥–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ —Ñ–æ—Ç–æ —Å–∞–º–æ–≥–æ –∑–ª–æ–≥–æ –∫–æ—Ç–∞. –ò–≥—Ä–æ–∫ —Å —Å–∞–º—ã–º –¥–æ–±—Ä—ã–º –∫–æ—Ç–æ–º –≤ –≥–∞–ª–µ—Ä–µ–µ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç –∏ –ø—å—ë—Ç.",
        "üê± –ü–æ–∫–∞–∂–∏ —Ñ–æ—Ç–æ —Å–∞–º–æ–≥–æ —Å–µ—Ä–¥–∏—Ç–æ–≥–æ –∫–æ—Ç–∞ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞. –í–ª–∞–¥–µ–ª–µ—Ü —Å–∞–º–æ–≥–æ –º–∏–ª–æ–≥–æ –∫–æ—Ç–∞ —Å—Ä–µ–¥–∏ –∏–≥—Ä–æ–∫–æ–≤ –≤—ã–ø–∏–≤–∞–µ—Ç —à—Ç—Ä–∞—Ñ–Ω—É—é.",
        "üê± –ù–∞–π–¥–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∞–º–æ–≥–æ –≥—Ä–æ–∑–Ω–æ–≥–æ –∫–æ—Ç–∞. –¢–æ—Ç, —É –∫–æ–≥–æ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ —Å–∞–º—ã–π –¥–æ–±—Ä—ã–π –∫–æ—Ç, –ø—å—ë—Ç."
    ],
    6: [
        "‚öñÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∏ –Ω–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ: –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ —Ä–æ–Ω—è–µ—Ç –±–∞—à–Ω—é, –æ–Ω –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ –ø–µ—Ä–µ–¥–∞—Ç—å —á–∞—Å—Ç—å —Å–≤–æ–µ–≥–æ —à—Ç—Ä–∞—Ñ–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª–æ–≤–∏–Ω—É) –ª—é–±–æ–º—É –¥—Ä—É–≥–æ–º—É –∏–≥—Ä–æ–∫—É –ø–æ —Å–≤–æ–µ–º—É –≤—ã–±–æ—Ä—É.",
        "‚öñÔ∏è –í–≤–µ–¥–∏ –ø—Ä–∞–≤–∏–ª–æ: –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –±–∞—à–Ω–∏ –≤–∏–Ω–æ–≤–Ω–∏–∫ –º–æ–∂–µ—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞–∫–∞–∑–∞–Ω–∏–µ —Å –æ–¥–Ω–∏–º –∏–≥—Ä–æ–∫–æ–º –Ω–∞ —Å–≤–æ–π –≤—ã–±–æ—Ä.",
        "‚öñÔ∏è –°–æ–∑–¥–∞–π –Ω–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ: —É—Ä–æ–Ω–∏–≤—à–∏–π –±–∞—à–Ω—é –º–æ–∂–µ—Ç –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–æ 50% —à—Ç—Ä–∞—Ñ–∞ –ª—é–±–æ–º—É —É—á–∞—Å—Ç–Ω–∏–∫—É."
    ]
}

async def main():
    try:
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        bot = Bot(token=BOT_TOKEN)
        dp = Dispatcher()
        
        print("üü° –ü—Ä–æ–≤–µ—Ä—è—é —Ç–æ–∫–µ–Ω –±–æ—Ç–∞...")
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
        bot_info = await bot.get_me()
        print(f"üü¢ –ë–æ—Ç @{bot_info.username} —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω!")
        
        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
        @dp.message(Command("start"))
        async def cmd_start(message: types.Message):
            welcome_text = """
üéÆ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É "–î–∂–µ–Ω–≥–∞ —Å –∑–∞–¥–∞–Ω–∏—è–º–∏"!

üìã –ü—Ä–∞–≤–∏–ª–∞:
‚Ä¢ –í–≤–µ–¥–∏—Ç–µ —Ü–∏—Ñ—Ä—É –æ—Ç 1 –¥–æ 6
‚Ä¢ –ü–æ–ª—É—á–∏—Ç–µ —Å–ª—É—á–∞–π–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –∏–≥—Ä—ã
‚Ä¢ –í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∏ –≤–µ—Å–µ–ª–∏—Ç–µ—Å—å!

üéØ –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
/start - –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É
/rules - –ø—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã
/task - —Å–ª—É—á–∞–π–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ

–í–≤–µ–¥–∏—Ç–µ —Ü–∏—Ñ—Ä—É –æ—Ç 1 –¥–æ 6:"""
            await message.answer(welcome_text)
        
        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /rules
        @dp.message(Command("rules"))
        async def cmd_rules(message: types.Message):
            rules_text = """
üìú –ü—Ä–∞–≤–∏–ª–∞ –î–∂–µ–Ω–≥–∏ —Å –∑–∞–¥–∞–Ω–∏—è–º–∏:

1. –ö–∞–∂–¥—ã–π –∏–≥—Ä–æ–∫ –ø–æ –æ—á–µ—Ä–µ–¥–∏ –≤—ã—Ç–∞—Å–∫–∏–≤–∞–µ—Ç –æ–¥–∏–Ω –±–ª–æ–∫ –∏–∑ –±–∞—à–Ω–∏ –∏ —Å—Ç–∞–≤–∏—Ç –µ–≥–æ –Ω–∞–≤–µ—Ä—Ö
2. –ü–µ—Ä–µ–¥ —Ö–æ–¥–æ–º –∏–≥—Ä–æ–∫ –≤–≤–æ–¥–∏—Ç —Ü–∏—Ñ—Ä—É –æ—Ç 1 –¥–æ 6 –≤ —ç—Ç–æ–≥–æ –±–æ—Ç–∞
3. –ë–æ—Ç –≤—ã–¥–∞—ë—Ç —Å–ª—É—á–∞–π–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
4. –ó–∞–¥–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –ø–µ—Ä–µ–¥ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º –±–ª–æ–∫–∞
5. –ï—Å–ª–∏ –±–∞—à–Ω—è –ø–∞–¥–∞–µ—Ç - –∏–≥—Ä–æ–∫, –≤—ã–∑–≤–∞–≤—à–∏–π –ø–∞–¥–µ–Ω–∏–µ, –ø–æ–ª—É—á–∞–µ—Ç —à—Ç—Ä–∞—Ñ
6. –ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è, –ø–æ–∫–∞ –Ω–µ —É–ø–∞–¥—ë—Ç –±–∞—à–Ω—è!

üé≤ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–¥–∞–Ω–∏–π:
1 - –ì–æ–ª–æ—Å–æ–≤—ã–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—ã
2 - –ù–∞–ø–∏—Ç–∫–∏ –∏ —Å—Ç–æ–ø–∫–∏  
3 - –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è
4 - –°–º–µ–Ω–∞ –∏–º—ë–Ω
5 - –ö–æ—à–∞—á—å–∏ –±–∞—Ç–∞–ª–∏–∏
6 - –ù–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞"""
            await message.answer(rules_text)
        
        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /task
        @dp.message(Command("task"))
        async def cmd_task(message: types.Message):
            category = random.randint(1, 6)
            task = random.choice(TASKS[category])
            response = f"üé≤ –°–ª—É—á–∞–π–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ (–∫–∞—Ç–µ–≥–æ—Ä–∏—è {category}):\n\n{task}"
            await message.answer(response)
        
        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ü–∏—Ñ—Ä –æ—Ç 1 –¥–æ 6
        @dp.message()
        async def handle_numbers(message: types.Message):
            text = message.text.strip()
            
            if text.isdigit():
                number = int(text)
                
                if 1 <= number <= 6:
                    if number <= 2:
                        # –î–ª—è —Ü–∏—Ñ—Ä 1 –∏ 2 - —Å–ª—É—á–∞–π–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–π 1-3
                        category = random.randint(1, 3)
                        task = random.choice(TASKS[category])
                        response = f"üé≤ –í—ã –≤–≤–µ–ª–∏ {number}:\n\n{task}"
                    else:
                        # –î–ª—è —Ü–∏—Ñ—Ä 3-6 - —Å–ª—É—á–∞–π–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–π 4-6
                        category = random.randint(4, 6)
                        task = random.choice(TASKS[category])
                        response = f"üé≤ –í—ã –≤–≤–µ–ª–∏ {number}:\n\n{task}"
                    
                    await message.answer(response)
                    return
            
            # –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ —Ü–∏—Ñ—Ä–∞ –æ—Ç 1 –¥–æ 6
            if text not in ['/start', '/rules', '/task']:
                await message.answer("‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ü–∏—Ñ—Ä—É –æ—Ç 1 –¥–æ 6 –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã:\n/start - –Ω–∞—á–∞—Ç—å\n/rules - –ø—Ä–∞–≤–∏–ª–∞\n/task - —Å–ª—É—á–∞–π–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ")
        
        print("üü¢ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!")
        print("üéÆ –ò–≥—Ä–∞ '–î–∂–µ–Ω–≥–∞ —Å –∑–∞–¥–∞–Ω–∏—è–º–∏' –∞–∫—Ç–∏–≤–Ω–∞!")
        
        # –ó–∞–ø—É—Å–∫
        await dp.start_polling(bot)
        
    except Exception as e:
        print(f"üî¥ –û—à–∏–±–∫–∞: {e}")

if __name__ == '__main__':
    try:
        asyncio.run(main())
    except KeyboardInterrupt:
        print("\nüõë –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")